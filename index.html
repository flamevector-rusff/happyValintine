<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞</title>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<style>

/* ================= –®–†–ò–§–¢–´ ================= */

@font-face { font-family:'Atziluth'; src:url('https://raw.githubusercontent.com/flamevector-rusff/valentine/main/Atziluth-Script_1.ttf'); }
@font-face { font-family:'Belarus'; src:url('https://raw.githubusercontent.com/flamevector-rusff/valentine/main/Belarus-Regular(%2Bbel).otf'); }
@font-face { font-family:'Blast'; src:url('https://raw.githubusercontent.com/flamevector-rusff/valentine/main/Blast%20Black%20Hollow.otf'); }
@font-face { font-family:'SKNigar'; src:url('https://raw.githubusercontent.com/flamevector-rusff/valentine/main/SKNigarRUS.otf'); }
@font-face { font-family:'Tarbarsam'; src:url('https://raw.githubusercontent.com/flamevector-rusff/valentine/main/tarbarsam%20%D0%81%20Medium.ttf'); }
@font-face { font-family:'CinzelCustom'; src:url('https://raw.githubusercontent.com/flamevector-rusff/valentine/main/cinzel_regular.ttf'); }

/* ====== –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ====== */

body{
margin:0;background:#111;display:flex;justify-content:center;align-items:center;
height:100vh;gap:40px;font-family:'CinzelCustom';
}

.form-block{
width:350px;padding:25px;backdrop-filter:blur(15px);
background:rgba(255,255,255,0.1);border-radius:20px;color:white;
display:flex;flex-direction:column;gap:12px;
}

input,textarea,select{
font-family:'CinzelCustom';padding:8px;border:none;border-radius:6px;outline:none;
}

textarea{resize:none;height:120px;}
.counter{text-align:right;font-size:14px;}
button{padding:10px;border:none;border-radius:10px;cursor:pointer;font-family:'CinzelCustom';}
button:disabled{opacity:0.5;cursor:not-allowed;}

/* ===== –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä ===== */

.valentine{
width:600px;height:600px;
background-image:url('https://cdn.vectorstock.com/i/preview-1x/61/14/valentine-s-day-seamless-pattern-with-hand-drawn-vector-45896114.jpg');
background-repeat:repeat;
display:flex;justify-content:center;align-items:center;
position:relative;font-family:Arial,sans-serif;
}

.heart-container{
width:550px;height:550px;
display:flex;justify-content:center;align-items:center;
position:relative;
}

.heart{
font-size:590px;line-height:1;
color:#7B001C;transition:0.3s;
}

.heart-text{
position:absolute;top:50%;left:50%;
width:70%;transform:translate(-50%,-50%);
text-align:center;color:white;font-size:18px;line-height:1.4;
}

.signature{
position:absolute;bottom:10px;right:10px;
font-size:16px;color:#000;
}

.name-link{display:inline-block;transition:0.3s;}
.name-link:hover{transform:scale(1.1) rotate(-2deg);}

</style>
</head>

<body>

<div class="form-block">
<input type="text" id="toName" placeholder="–ò–º—è –∞–¥—Ä–µ—Å–∞—Ç–∞" required>
<input type="url" id="toLink" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å" required>
<input type="text" id="fromName" placeholder="–ò–º—è –∞–¥—Ä–µ—Å–∞–Ω—Ç–∞">

<div style="display:flex;justify-content:space-between;align-items:center;">
<span>–∞–Ω–æ–Ω–∏–º–Ω–æ</span>
<input type="checkbox" id="anon">
</div>

<textarea id="message" maxlength="200" placeholder="–ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ (–¥–æ 200 —Å–∏–º–≤–æ–ª–æ–≤)"></textarea>
<div class="counter" id="counter">0 / 200</div>

<label>–¶–≤–µ—Ç</label>
<select id="colorSelect">
<option value="#7B001C">#7B001C</option>
<option value="#CD5C5C">#CD5C5C</option>
<option value="#CB4154">#CB4154</option>
<option value="#DC143C">#DC143C</option>
<option value="#4F0014">#4F0014</option>
<option value="#FF97BB">#FF97BB</option>
<option value="#FBA0E3">#FBA0E3</option>
</select>

<label>–®—Ä–∏—Ñ—Ç</label>
<select id="fontSelect">
<option value="Atziluth">Atziluth</option>
<option value="Belarus">Belarus</option>
<option value="Blast">Blast</option>
<option value="SKNigar">SKNigar</option>
<option value="Tarbarsam">Tarbarsam</option>
<option value="CinzelCustom">Cinzel</option>
</select>

<button id="sendBtn" disabled>–£–ø–∞–∫–æ–≤–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫—É</button>
</div>

<div class="valentine">
<div class="heart-container">
<span class="heart" id="heart">‚ù§</span>
<div class="heart-text" id="previewText">[–∏–º—è,] —Ç–µ–∫—Å—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å</div>
<div class="signature" id="previewSign">—Å –ª—é–±–æ–≤—å—é[, –∏–º—è]</div>
</div>
</div>

<script>

emailjs.init("b9M6h3lPvYhW1xIBZ");

const forumStyles = `
.valentine{width:600px;height:600px;background-image:url('https://cdn.vectorstock.com/i/preview-1x/61/14/valentine-s-day-seamless-pattern-with-hand-drawn-vector-45896114.jpg');background-repeat:repeat;display:flex;justify-content:center;align-items:center;position:relative;font-family:Arial,sans-serif;}
.heart-container{width:550px;height:550px;display:flex;justify-content:center;align-items:center;position:relative;}
.heart{font-size:590px;line-height:1;}
.heart-text{position:absolute;top:50%;left:50%;width:70%;transform:translate(-50%,-50%);text-align:center;color:white;font-size:18px;line-height:1.4;}
.signature{position:absolute;bottom:10px;right:10px;font-size:16px;color:#000;}
.name-link{display:inline-block;transition:0.3s;}
.name-link:hover{transform:scale(1.1) rotate(-2deg);}
`;

const toName=document.getElementById("toName");
const toLink=document.getElementById("toLink");
const fromName=document.getElementById("fromName");
const message=document.getElementById("message");
const counter=document.getElementById("counter");
const anon=document.getElementById("anon");
const previewText=document.getElementById("previewText");
const previewSign=document.getElementById("previewSign");
const heart=document.getElementById("heart");
const sendBtn=document.getElementById("sendBtn");
const fontSelect=document.getElementById("fontSelect");
const colorSelect=document.getElementById("colorSelect");

function updatePreview(){
let namePart=toName.value?`<a href="${toLink.value}" class="name-link">${toName.value}</a>, `:"";
previewText.innerHTML=namePart+message.value;
previewSign.innerHTML="—Å –ª—é–±–æ–≤—å—é"+(anon.checked?"":", "+fromName.value);
previewText.style.fontFamily=fontSelect.value;
sendBtn.disabled=!(toName.value&&toLink.value);
}

message.addEventListener("input",()=>{
counter.textContent=message.value.length+" / 200";
counter.style.color=message.value.length>=200?"red":"white";
updatePreview();
});

[toName,toLink,fromName,fontSelect].forEach(el=>el.addEventListener("input",updatePreview));
colorSelect.addEventListener("change",()=>heart.style.color=colorSelect.value);
anon.addEventListener("change",()=>{fromName.disabled=anon.checked;updatePreview();});

sendBtn.addEventListener("click",()=>{

let finalCode=`[html]
<div class="valentine">
<div class="heart-container">
<span class="heart" style="color:${colorSelect.value};">‚ù§</span>
<div class="heart-text" style="font-family:${fontSelect.value};">
<a href="${toLink.value}" class="name-link">${toName.value}</a>, ${message.value}
</div>
<div class="signature">
—Å –ª—é–±–æ–≤—å—é${anon.checked?"":", "+fromName.value}
</div>
</div>
</div>
<style>
${forumStyles}
</style>
[/html]`;

emailjs.send("service_3gq1lpc","template_hl05cfu",{message:finalCode})
.then(()=>alert("–í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ üíå"));

});

</script>
</body>
</html>
